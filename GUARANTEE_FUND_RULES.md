# Guarantee Fund Rules - –ü—Ä–∞–≤–∏–ª–∞ –≥–∞—Ä–∞–Ω—Ç–∏–π–Ω–æ–≥–æ —Ñ–æ–Ω–¥–∞

## ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–∂–Ω–æ—Å—Ç—å

–ì–∞—Ä–∞–Ω—Ç–∏–π–Ω—ã–π —Ñ–æ–Ω–¥ - **—Å–∞–º–∞—è –æ–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞** –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:
- –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏: –ø–æ—Ö–æ–∂ –Ω–∞ —Å—Ç—Ä–∞—Ö–æ–≤—É—é/–≥–∞—Ä–∞–Ω—Ç–∏–π–Ω—É—é –º–µ—Ö–∞–Ω–∏–∫—É
- –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏: –µ—Å–ª–∏ –ø—Ä–æ—Å—Ä–æ—á–µ–∫ –º–Ω–æ–≥–æ ‚Üí —Ñ–æ–Ω–¥ —É–º–∏—Ä–∞–µ—Ç
- –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ: –Ω—É–∂–Ω—ã —á–µ—Ç–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –∫–æ–º—É –ø–ª–∞—Ç–∏—Ç—å –∏ –∫–æ–≥–¥–∞

**–ë–µ–∑ —á–µ—Ç–∫–∏—Ö –ø—Ä–∞–≤–∏–ª —ç—Ç–æ –±–æ–º–±–∞ –∑–∞–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è.**

---

## üìê –ü—Ä–∞–≤–∏–ª–∞ —Ñ–æ–Ω–¥–∞ (–ø—Ä–æ–¥—É–∫—Ç–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç)

### 1. –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–¥–∞

**–ò—Å—Ç–æ—á–Ω–∏–∫:** 5% –æ—Ç –∫–∞–∂–¥–æ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞

```typescript
// –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç–µ —Å–º–µ–Ω—ã
const platformFee = payment.amount * 0.15      // 15% –∫–æ–º–∏—Å—Å–∏—è
const guaranteeFee = payment.amount * 0.05     // 5% –≤ —Ñ–æ–Ω–¥
const platformRevenue = payment.amount * 0.10  // 10% —á–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å

await depositToGuaranteeFund({
  amount: guaranteeFee,
  payment_id: payment.id,
  shift_id: shift.id
})
```

**–ü—Ä–∞–≤–∏–ª–æ:** –§–æ–Ω–¥ –ø–æ–ø–æ–ª–Ω—è–µ—Ç—Å—è **–¥–æ** –≤—ã–ø–ª–∞—Ç—ã worker (–Ω–µ –ø–æ—Å–ª–µ).

---

### 2. –õ–∏–º–∏—Ç—ã –Ω–∞ –≤—ã–ø–ª–∞—Ç—É –∏–∑ —Ñ–æ–Ω–¥–∞

**–ü—Ä–∞–≤–∏–ª–æ #1: –ú–µ—Å—è—á–Ω—ã–π –ª–∏–º–∏—Ç**
```
Max –≤—ã–ø–ª–∞—Ç –∏–∑ —Ñ–æ–Ω–¥–∞ / –º–µ—Å—è—Ü = 20% –æ—Ç –æ–±–æ—Ä–æ—Ç–∞ –º–µ—Å—è—Ü–∞
```

**–ü—Ä–∏–º–µ—Ä:**
- –û–±–æ—Ä–æ—Ç –∑–∞ –º–µ—Å—è—Ü: 1 000 000 ‚ÇΩ
- –ú–∞–∫—Å. –≤—ã–ø–ª–∞—Ç–∞ –∏–∑ —Ñ–æ–Ω–¥–∞: 200 000 ‚ÇΩ
- –ï—Å–ª–∏ –¥–æ—Å—Ç–∏–≥–ª–∏ –ª–∏–º–∏—Ç–∞ ‚Üí –≤–∫–ª—é—á–∞–µ—Ç—Å—è **Emergency Mode**

**–ü—Ä–∞–≤–∏–ª–æ #2: –õ–∏–º–∏—Ç –Ω–∞ 1 –≤—ã–ø–ª–∞—Ç—É**
```
Max —Å—É–º–º–∞ 1 –≤—ã–ø–ª–∞—Ç—ã = MIN(100 000 ‚ÇΩ, balance * 0.3)
```

**–ü—Ä–∏–º–µ—Ä:**
- –ë–∞–ª–∞–Ω—Å —Ñ–æ–Ω–¥–∞: 50 000 ‚ÇΩ
- –°–º–µ–Ω–∞ –Ω–∞ 80 000 ‚ÇΩ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–∞
- –í—ã–ø–ª–∞—á–∏–≤–∞–µ–º: MIN(100 000, 50 000 * 0.3) = 15 000 ‚ÇΩ
- –û—Å—Ç–∞—Ç–æ–∫ 65 000 ‚ÇΩ ‚Üí **–¥–æ–ª–≥** client

**–ü—Ä–∞–≤–∏–ª–æ #3: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤—ã–ø–ª–∞—Ç**
```
1. Verified workers (passport + phone + trust_score > 70)
2. Workers —Å 5+ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–º–∏ —Å–º–µ–Ω–∞–º–∏
3. –ù–æ–≤—ã–µ workers (–≤ –ø–æ—Ä—è–¥–∫–µ –æ—á–µ—Ä–µ–¥–∏)
```

–ï—Å–ª–∏ —Ñ–æ–Ω–¥–∞ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö ‚Üí –ø–ª–∞—Ç–∏–º –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É.

---

### 3. Emergency Mode (—Ñ–æ–Ω–¥ –∫–æ–Ω—á–∞–µ—Ç—Å—è)

**–¢—Ä–∏–≥–≥–µ—Ä:** –ë–∞–ª–∞–Ω—Å —Ñ–æ–Ω–¥–∞ < 10% –æ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ –º–µ—Å—è—á–Ω–æ–≥–æ –æ–±–æ—Ä–æ—Ç–∞

**–î–µ–π—Å—Ç–≤–∏—è:**

**–£—Ä–æ–≤–µ–Ω—å 1 (Balance < 10% –æ–±–æ—Ä–æ—Ç–∞):**
```typescript
// –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ –¥–ª—è –Ω–æ–≤—ã—Ö clients (trust_score < 80)
await updatePlatformSettings({
  require_prepayment_for_new_clients: true,
  min_trust_score_for_postpay: 80
})
```

**–£—Ä–æ–≤–µ–Ω—å 2 (Balance < 5% –æ–±–æ—Ä–æ—Ç–∞):**
```typescript
// –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ –¥–ª—è –≤—Å–µ—Ö clients –∫—Ä–æ–º–µ verified
await updatePlatformSettings({
  require_prepayment_for_all: true,
  exceptions: ['verified_clients'] // INN + 10+ —É—Å–ø–µ—à–Ω—ã—Ö —Å–º–µ–Ω
})
```

**–£—Ä–æ–≤–µ–Ω—å 3 (Balance < 2% –æ–±–æ—Ä–æ—Ç–∞):**
```typescript
// –ü–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ pay-after –º–æ–¥–µ–ª–∏
await updatePlatformSettings({
  require_prepayment_for_all: true,
  exceptions: [] // –ù–ï–¢ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
})

// –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞
await notifyAdmin('CRITICAL: Guarantee fund depleted. Prepayment enforced.')
```

**–í—ã—Ö–æ–¥ –∏–∑ Emergency Mode:**
- –ë–∞–ª–∞–Ω—Å —Ñ–æ–Ω–¥–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è –¥–æ >15% –æ–±–æ—Ä–æ—Ç–∞
- –ê–¥–º–∏–Ω –≤—Ä—É—á–Ω—É—é –æ—Ç–∫–ª—é—á–∏–ª —Ä–µ–∂–∏–º

---

### 4. –ö–æ–º—É –¥–æ—Å—Ç—É–ø–Ω–∞ –≤—ã–ø–ª–∞—Ç–∞ –∏–∑ —Ñ–æ–Ω–¥–∞

**–ù–ï –ø–ª–∞—Ç–∏–º –∏–∑ —Ñ–æ–Ω–¥–∞:**
- ‚ùå Worker —Å trust_score < 30 (–ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π)
- ‚ùå Worker –±–µ–∑ verified phone
- ‚ùå Worker —Å is_suspicious = true
- ‚ùå –°–º–µ–Ω—ã –Ω–∞ —Å—É–º–º—É > 100 000 ‚ÇΩ (—Å–ª–∏—à–∫–æ–º —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–æ, –Ω—É–∂–µ–Ω –∞–¥–º–∏–Ω)

**–ü–ª–∞—Ç–∏–º –∏–∑ —Ñ–æ–Ω–¥–∞:**
- ‚úÖ Worker verified + trust_score >= 30
- ‚úÖ –°—É–º–º–∞ —Å–º–µ–Ω—ã <= 100 000 ‚ÇΩ
- ‚úÖ Client –ø—Ä–æ—Å—Ä–æ—á–∫–∞ > 24h
- ‚úÖ –í —Ä–∞–º–∫–∞—Ö –ª–∏–º–∏—Ç–æ–≤ (—Å–º. #2)

---

### 5. –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞

**–ö—Ç–æ –æ–±—è–∑–∞–Ω –ø–ª–∞—Ç–∏—Ç—å –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É (–Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω pay-after):**

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
```typescript
const requirePrepayment = (client: Client) => {
  // 1. –ù–æ–≤—ã–µ clients (< 3 —É—Å–ø–µ—à–Ω—ã—Ö —Å–º–µ–Ω)
  if (client.completed_shifts < 3) return true

  // 2. –ù–∏–∑–∫–∏–π trust_score
  if (client.trust_score < 50) return true

  // 3. –ï—Å—Ç—å –¥–æ–ª–≥–∏
  if (client.unpaid_debts > 0) return true

  // 4. Emergency mode
  if (platformSettings.emergency_mode) {
    if (!client.inn_verified) return true
    if (client.completed_shifts < 10) return true
  }

  return false
}
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞:**
```typescript
// –í–º–µ—Å—Ç–æ pay-after:
// 1. Client —Å–æ–∑–¥–∞–µ—Ç —Å–º–µ–Ω—É (draft)
// 2. Client –ø–ª–∞—Ç–∏—Ç –°–†–ê–ó–£ (capture: true, –ù–ï —Ö–æ–ª–¥)
// 3. –î–µ–Ω—å–≥–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
// 4. –°–º–µ–Ω–∞ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è (draft ‚Üí open)
// 5. –ü–æ—Å–ª–µ completion ‚Üí –≤—ã–ø–ª–∞—Ç–∞ worker

// –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:
// - 0 —Ä–∏—Å–∫–∞ –¥–ª—è —Ñ–æ–Ω–¥–∞
// - Worker –∑–∞—â–∏—â–µ–Ω
// - Client –≤–∏–¥–∏—Ç "–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ" –∫–∞–∫ VIP —Å—Ç–∞—Ç—É—Å
```

---

### 6. –î–æ–ª–≥–∏ (Debts) - –∫–∞–∫ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–¢–∞–±–ª–∏—Ü–∞:**
```sql
CREATE TABLE debts (
  id UUID PRIMARY KEY,
  client_id UUID NOT NULL,
  shift_id UUID NOT NULL,
  amount DECIMAL(10,2) NOT NULL,
  reason VARCHAR(50), -- 'unpaid_shift' | 'dispute_lost'
  status VARCHAR(20) DEFAULT 'open', -- open | paid | written_off
  created_at TIMESTAMP DEFAULT NOW(),
  paid_at TIMESTAMP,
  written_off_at TIMESTAMP
);
```

**–ö–∞–∫ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –¥–æ–ª–≥:**

**1. Client —Å–∞–º –ø–ª–∞—Ç–∏—Ç (–¥–æ–±—Ä–æ–≤–æ–ª—å–Ω–æ):**
```typescript
// Client –∑–∞—Ö–æ–¥–∏—Ç –≤ –ø—Ä–æ—Ñ–∏–ª—å, –≤–∏–¥–∏—Ç –¥–æ–ª–≥
// –ö–Ω–æ–ø–∫–∞ "–û–ø–ª–∞—Ç–∏—Ç—å –¥–æ–ª–≥"
await createPayment({
  amount: debt.amount,
  description: `–ü–æ–≥–∞—à–µ–Ω–∏–µ –¥–æ–ª–≥–∞ –∑–∞ —Å–º–µ–Ω—É ${debt.shift_id}`
})

// –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã
await updateDebt(debt.id, { status: 'paid', paid_at: NOW })
await unblockClient(debt.client_id) // –ï—Å–ª–∏ —ç—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–æ–ª–≥
```

**2. –ê–¥–º–∏–Ω —Å–ø–∏—Å—ã–≤–∞–µ—Ç (bad debt):**
```typescript
// –ß–µ—Ä–µ–∑ 90 –¥–Ω–µ–π –Ω–µ–æ–ø–ª–∞—Ç—ã:
if (debt.created_at < NOW - 90 days) {
  await updateDebt(debt.id, {
    status: 'written_off',
    written_off_at: NOW
  })

  // –ù–û client –æ—Å—Ç–∞–µ—Ç—Å—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –Ω–∞–≤—Å–µ–≥–¥–∞
  await permanentBan(debt.client_id, 'unpaid_debt_90d')
}
```

**3. –í–∑—ã—Å–∫–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å—É–º–º):**
- –î–æ–ª–≥ > 50 000 ‚ÇΩ ‚Üí –ø–µ—Ä–µ–¥–∞–µ–º –≤ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä—Å–∫–æ–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ
- –î–æ–ª–≥ > 100 000 ‚ÇΩ ‚Üí –ø–æ–¥–∞–µ–º –≤ —Å—É–¥

---

### 7. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è —Ñ–æ–Ω–¥–∞

**KPI –º–µ—Ç—Ä–∏–∫–∏:**

```typescript
// 1. –ë–∞–ª–∞–Ω—Å —Ñ–æ–Ω–¥–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –æ–±–æ—Ä–æ—Ç–∞
const fundHealthRatio = fund.balance / monthlyRevenue
// –¶–µ–ª—å: >15%
// Warning: <10%
// Critical: <5%

// 2. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–ø–ª–∞—Ç –∏–∑ —Ñ–æ–Ω–¥–∞
const fundPayoutRate = fundPayouts / totalShifts
// –¶–µ–ª—å: <2%
// Warning: 2-5%
// Critical: >5%

// 3. –ü—Ä–æ—Ü–µ–Ω—Ç –¥–æ–ª–≥–æ–≤ –∫ –æ–±–æ—Ä–æ—Ç—É
const debtRatio = openDebts.sum / monthlyRevenue
// –¶–µ–ª—å: <1%
// Warning: 1-3%
// Critical: >3%

// 4. Recovery rate (–≤–æ–∑–≤—Ä–∞—Ç –¥–æ–ª–≥–æ–≤)
const recoveryRate = paidDebts / totalDebts
// –¶–µ–ª—å: >50%
// Warning: 30-50%
// Critical: <30%
```

**Alert system:**
```typescript
// –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –ø—Ä–æ–≤–µ—Ä—è–µ–º
async function checkFundHealth() {
  const health = await calculateFundHealth()

  if (health.fundHealthRatio < 0.05) {
    await notifyAdmin('CRITICAL: Fund balance < 5% of revenue')
    await enableEmergencyMode(3) // –ü–æ–ª–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ pay-after
  } else if (health.fundHealthRatio < 0.10) {
    await notifyAdmin('WARNING: Fund balance < 10% of revenue')
    await enableEmergencyMode(1) // –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ –¥–ª—è –Ω–æ–≤—ã—Ö
  }

  if (health.fundPayoutRate > 0.05) {
    await notifyAdmin('CRITICAL: Fund payout rate > 5%')
    await investigatePaymentIssues()
  }
}
```

---

### 8. –ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è –∏ —é—Ä–∏–¥–∏–∫–∞

**–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏ —Ñ–æ–Ω–¥ - —ç—Ç–æ:**
- –ù–ï —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ (–Ω–µ—Ç –ª–∏—Ü–µ–Ω–∑–∏–∏ –¶–ë)
- –ù–ï —ç—Å–∫—Ä–æ—É (–Ω–µ—Ç —Ö–æ–ª–¥–∞)
- –≠–¢–û: **—Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã** –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è —Ä–∏—Å–∫–æ–≤ –Ω–µ–æ–ø–ª–∞—Ç—ã

**–û—Ç—Ä–∞–∂–µ–Ω–∏–µ –≤ –±—É—Ö—É—á–µ—Ç–µ:**
```
–ü—Ä–∏—Ö–æ–¥:
–î51 (—Ä–∞—Å—á–µ—Ç–Ω—ã–π —Å—á–µ—Ç)    –ö90 (–≤—ã—Ä—É—á–∫–∞)         - 100 000 ‚ÇΩ (–ø–ª–∞—Ç–µ–∂ client)
–î90 (—Ä–∞—Å—Ö–æ–¥—ã)           –ö51 (—Å—á–µ—Ç)            - 85 000 ‚ÇΩ (–≤—ã–ø–ª–∞—Ç–∞ worker)
–î90 (—Ä–∞—Å—Ö–æ–¥—ã)           –ö76 (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥)  - 5 000 ‚ÇΩ (–≤ —Ñ–æ–Ω–¥)
–î90 (—Ä–∞—Å—Ö–æ–¥—ã)           –ö99 (–ø—Ä–∏–±—ã–ª—å)         - 10 000 ‚ÇΩ (—á–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å)

–í—ã–ø–ª–∞—Ç–∞ –∏–∑ —Ñ–æ–Ω–¥–∞:
–î76 (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥)    –ö51 (—Å—á–µ—Ç)            - 5 000 ‚ÇΩ (–∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è worker)
–î62 (–¥–µ–±–∏—Ç–æ—Ä–∫–∞)         –ö76 (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥)  - 5 000 ‚ÇΩ (–¥–æ–ª–≥ client)
```

**–ù–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏–µ:**
- –§–æ–Ω–¥ = —á–∞—Å—Ç—å –≤—ã—Ä—É—á–∫–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- –ù–∞–ª–æ–≥ –ø–ª–∞—Ç–∏—Ç—Å—è —Å –í–°–ï–ô –∫–æ–º–∏—Å—Å–∏–∏ (15%), –≤–∫–ª—é—á–∞—è 5% –≤ —Ñ–æ–Ω–¥
- –í—ã–ø–ª–∞—Ç–∞ –∏–∑ —Ñ–æ–Ω–¥–∞ = —Ä–∞—Å—Ö–æ–¥ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (—É–º–µ–Ω—å—à–∞–µ—Ç –Ω–∞–ª–æ–≥–æ–æ–±–ª–∞–≥–∞–µ–º—É—é –±–∞–∑—É)

---

### 9. –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞ (—Ä–µ–∞–ª—å–Ω—ã–µ —Ü–∏—Ñ—Ä—ã)

**–ú–µ—Å—è—Ü 1:**
- –û–±–æ—Ä–æ—Ç: 1 000 000 ‚ÇΩ (100 —Å–º–µ–Ω –ø–æ 10k)
- –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–¥–∞: 1 000 000 * 0.05 = 50 000 ‚ÇΩ
- –í—ã–ø–ª–∞—Ç—ã –∏–∑ —Ñ–æ–Ω–¥–∞: 2 —Å–º–µ–Ω—ã (20k) = 20 000 ‚ÇΩ (2%)
- –ë–∞–ª–∞–Ω—Å —Ñ–æ–Ω–¥–∞: 50 000 - 20 000 = 30 000 ‚ÇΩ

**–ê–Ω–∞–ª–∏–∑:** ‚úÖ –ó–¥–æ—Ä–æ–≤ (fund_health_ratio = 30k / 1M = 3%)

**–ú–µ—Å—è—Ü 2:**
- –û–±–æ—Ä–æ—Ç: 1 500 000 ‚ÇΩ (150 —Å–º–µ–Ω)
- –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ: 75 000 ‚ÇΩ
- –í—ã–ø–ª–∞—Ç—ã: 8 —Å–º–µ–Ω (80k) = 80 000 ‚ÇΩ (5.3%) ‚ö†Ô∏è
- –ë–∞–ª–∞–Ω—Å: 30k + 75k - 80k = 25 000 ‚ÇΩ

**–ê–Ω–∞–ª–∏–∑:** ‚ö†Ô∏è Warning (payout_rate = 5.3% > 5%)
**–î–µ–π—Å—Ç–≤–∏–µ:**
- –í–∫–ª—é—á–∏—Ç—å Emergency Mode 1 (–ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ –¥–ª—è –Ω–æ–≤—ã—Ö)
- –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –ø–æ—á–µ–º—É –º–Ω–æ–≥–æ –Ω–µ–æ–ø–ª–∞—Ç

**–ú–µ—Å—è—Ü 3 (—Å Emergency Mode):**
- –û–±–æ—Ä–æ—Ç: 2 000 000 ‚ÇΩ
- –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ: 100 000 ‚ÇΩ
- –í—ã–ø–ª–∞—Ç—ã: 3 —Å–º–µ–Ω—ã (30k) = 30 000 ‚ÇΩ (1.5%) ‚úÖ
- –ë–∞–ª–∞–Ω—Å: 25k + 100k - 30k = 95 000 ‚ÇΩ

**–ê–Ω–∞–ª–∏–∑:** ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (fund_health_ratio = 95k / 2M = 4.75%)
**–î–µ–π—Å—Ç–≤–∏–µ:** –û—Ç–∫–ª—é—á–∏—Ç—å Emergency Mode

---

### 10. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π (–∫–æ–≥–¥–∞ —Ñ–æ–Ω–¥ –ù–ï –Ω—É–∂–µ–Ω)

**–ï—Å–ª–∏ –ø—Ä–æ—Å—Ä–æ—á–µ–∫ —Å—Ç–∞–±–∏–ª—å–Ω–æ <1%:**

–ú–æ–∂–Ω–æ –≤–æ–æ–±—â–µ –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç —Ñ–æ–Ω–¥–∞ –∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–∞–∫:
```typescript
// –í–º–µ—Å—Ç–æ —Ñ–æ–Ω–¥–∞: —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ —á–µ—Ä–µ–∑ –ø–∞—Ä—Ç–Ω–µ—Ä–∞
// –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ–∫—É–ø–∞–µ—Ç —Å—Ç—Ä–∞—Ö–æ–≤–∫—É —É —Å—Ç—Ä–∞—Ö–æ–≤–æ–π –∫–æ–º–ø–∞–Ω–∏–∏

const insurancePolicy = {
  provider: '–°—Ç—Ä–∞—Ö–æ–≤–∞—è –∫–æ–º–ø–∞–Ω–∏—è X',
  coverage: '100% –æ–ø–ª–∞—Ç—ã worker –ø—Ä–∏ –Ω–µ–æ–ø–ª–∞—Ç–µ client',
  premium: '2% –æ—Ç –æ–±–æ—Ä–æ—Ç–∞', // –î–µ—à–µ–≤–ª–µ —á–µ–º 5% –≤ —Ñ–æ–Ω–¥
  limit: '10 000 000 ‚ÇΩ/–º–µ—Å—è—Ü'
}

// –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
// - –ù–µ—Ç —Ä–∏—Å–∫–∞ –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
// - –õ–µ–≥–∏—Ç–∏–º–Ω–æ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏
// - –ú–æ–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å—Å—è

// –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
// - –ù—É–∂–µ–Ω –¥–æ–≥–æ–≤–æ—Ä —Å–æ —Å—Ç—Ä–∞—Ö–æ–≤–æ–π
// - –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
// - –ü—Ä–µ–º–∏—è 2% —Å–Ω–∏–∂–∞–µ—Ç –ø—Ä–∏–±—ã–ª—å
```

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è –º–∞—Ç—Ä–∏—Ü–∞ —Ä–µ—à–µ–Ω–∏–π

| –°—Ü–µ–Ω–∞—Ä–∏–π | –†–µ—à–µ–Ω–∏–µ | –ö—Ç–æ –ø–ª–∞—Ç–∏—Ç worker |
|----------|---------|-------------------|
| Client –ø–ª–∞—Ç–∏—Ç –≤–æ–≤—Ä–µ–º—è (<24h) | –ù–æ—Ä–º–∞ | Client ‚Üí worker |
| Client –æ–ø–∞–∑–¥—ã–≤–∞–µ—Ç (24-48h) | trust_score -10 | Client ‚Üí worker (—Å –∑–∞–¥–µ—Ä–∂–∫–æ–π) |
| Client –Ω–µ –ø–ª–∞—Ç–∏—Ç (>48h, fund OK) | trust_score -30, block | **Fund ‚Üí worker**, –¥–æ–ª–≥ –Ω–∞ client |
| Client –Ω–µ –ø–ª–∞—Ç–∏—Ç (>48h, fund LOW) | Emergency Mode ON | –û—á–µ—Ä–µ–¥—å (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç verified) |
| Client –Ω–µ –ø–ª–∞—Ç–∏—Ç (Emergency Mode) | –¢—Ä–µ–±—É–µ–º –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É | - |
| –ù–æ–≤—ã–π client (< 3 —Å–º–µ–Ω) | –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ | Client ‚Üí worker (—Å—Ä–∞–∑—É) |
| Low trust client (< 50) | –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ | Client ‚Üí worker (—Å—Ä–∞–∑—É) |
| Verified client (INN + 10 —Å–º–µ–Ω) | Pay-after –≤—Å–µ–≥–¥–∞ | Client ‚Üí worker |

---

## üéØ Checklist –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `guarantee_fund`
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `guarantee_fund_transactions`
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `debts`
- [ ] –§—É–Ω–∫—Ü–∏—è `depositToGuaranteeFund()`
- [ ] –§—É–Ω–∫—Ü–∏—è `payFromGuaranteeFund()`
- [ ] –§—É–Ω–∫—Ü–∏—è `checkFundHealth()` (cron daily)
- [ ] –§—É–Ω–∫—Ü–∏—è `requirePrepayment(client)`
- [ ] Emergency Mode (3 —É—Ä–æ–≤–Ω—è)
- [ ] Admin dashboard (fund metrics)
- [ ] Alert system (Telegram –±–æ—Ç—ã –¥–ª—è –∞–¥–º–∏–Ω–∞)

---

## üí° –í—ã–≤–æ–¥

**–ì–∞—Ä–∞–Ω—Ç–∏–π–Ω—ã–π —Ñ–æ–Ω–¥ - —ç—Ç–æ –Ω–µ "—Ñ–∏—á–∞", —ç—Ç–æ –±–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª—å.**

–ë–µ–∑ —á–µ—Ç–∫–∏—Ö –ø—Ä–∞–≤–∏–ª —ç—Ç–æ:
- ‚ùå –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π —Ä–∏—Å–∫ (–ø–æ—Ö–æ–∂ –Ω–∞ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ)
- ‚ùå –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π —Ä–∏—Å–∫ (—Ñ–æ–Ω–¥ —É–º–∏—Ä–∞–µ—Ç)
- ‚ùå –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ä–∏—Å–∫ (–Ω–µ–ø–æ–Ω—è—Ç–Ω–æ –∫–æ–º—É –ø–ª–∞—Ç–∏—Ç—å)

**–° —á–µ—Ç–∫–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ —ç—Ç–æ:**
- ‚úÖ –ó–∞—â–∏—Ç–∞ workers (–ø–ª–∞—Ç–∏–º –∏–∑ —Ñ–æ–Ω–¥–∞)
- ‚úÖ –ó–∞—â–∏—Ç–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (–ª–∏–º–∏—Ç—ã + Emergency Mode)
- ‚úÖ –°—Ç–∏–º—É–ª –¥–ª—è clients (pay-after —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö)
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å (–ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ –∫–∞–∫ fallback)

**–ü—Ä–∞–≤–∏–ª–æ –±–æ–ª—å—à–æ–≥–æ –ø–∞–ª—å—Ü–∞:** –ï—Å–ª–∏ —Ñ–æ–Ω–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è >2% –æ—Ç —Å–º–µ–Ω ‚Üí —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫ —Å trust score –∏–ª–∏ cancellation policy. –ù—É–∂–Ω–æ —É–∂–µ—Å—Ç–æ—á–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ clients.
